(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{v:()=>r});class t extends Phaser.Scene{constructor(){super("MainMenu")}init(){this.meteorTimer=0,this.meteorAcceleration=1.2,this.lastMeteorVelocityY=Phaser.Math.Between(100,300),this.lastMeteorVelocityYAccelerated=!1,this.lastAccelerationTime=0,this.meteorGenerationTime=1e3}preload(){this.load.setPath("../assets/"),this.load.image("meteor","meteor.png"),this.load.image("background","sky.png"),this.load.image("ground","platform.png")}create(){this.add.image(400,300,"background").setScale(2),this.ground=this.physics.add.staticGroup(),this.ground.create(400,600,"ground").setScale(2).refreshBody(),this.meteors=this.physics.add.group(),this.playText=this.add.text(350,300,"PUTE",{fontSize:"32px",fill:"#000"}),this.playText.setInteractive(),this.playText.on("pointerdown",(()=>{this.scene.start("MainGame")})),this.physics.add.collider(this.meteors,this.ground)}update(e,t){this.meteorTimer+=t,this.meteorTimer>this.meteorGenerationTime&&(this.generateMeteor(),this.meteorTimer=0),e-this.lastAccelerationTime>1e4?(this.lastAccelerationTime=e,this.lastMeteorVelocityY*=this.meteorAcceleration,this.lastMeteorVelocityYAccelerated=!0,this.meteorGenerationTime*=.8):this.lastMeteorVelocityYAccelerated=!1,this.meteors.getChildren().forEach((function(e){e.body.touching.down&&e.active&&e.destroy()}))}generateMeteor(){if(console.log("alo",this.meteors),!this.gameOver){var e=Phaser.Math.Between(0,800),t=this.meteors.create(e,0,"meteor").setScale(.04);t.setVelocityY(this.lastMeteorVelocityY),t.setCollideWorldBounds(!0),t.setBounce(1),t.setGravityY(0),this.lastMeteorVelocityYAccelerated&&(t.velocityYBeforeAccelerate=this.lastMeteorVelocityY)}}}class s extends Phaser.Scene{constructor(){super("MainGame")}init(){this.score=0,this.gameOver=!1,this.meteorTimer=0,this.meteorAcceleration=1.2,this.lastMeteorVelocityY=Phaser.Math.Between(100,300),this.lastMeteorVelocityYAccelerated=!1,this.lastAccelerationTime=0,this.meteorGenerationTime=1e3}preload(){this.load.setPath("../assets/"),this.load.image("player","player.png"),this.load.image("meteor","meteor.png"),this.load.image("background","sky.png"),this.load.image("ground","platform.png")}create(){this.add.image(400,300,"background").setScale(2),this.ground=this.physics.add.staticGroup(),this.ground.create(400,600,"ground").setScale(2).refreshBody(),this.player=this.physics.add.sprite(400,500,"player").setScale(.4).setVelocityY(100),this.player.setCollideWorldBounds(!0),this.meteors=this.physics.add.group(),this.cursors=this.input.keyboard.createCursorKeys(),this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#000"}),this.physics.add.collider(this.player,this.meteors,this.hitMeteor,null,this),this.physics.add.collider(this.player,this.ground),this.physics.add.collider(this.meteors,this.ground)}update(e,t){this.cursors.left.isDown?this.player.setVelocityX(-300):this.cursors.right.isDown?this.player.setVelocityX(300):this.player.setVelocityX(0),this.scoreText.setText("Score: "+this.score),this.meteorTimer+=t,this.meteorTimer>this.meteorGenerationTime&&(this.generateMeteor(),this.meteorTimer=0),e-this.lastAccelerationTime>1e4?(this.lastAccelerationTime=e,this.lastMeteorVelocityY*=this.meteorAcceleration,this.lastMeteorVelocityYAccelerated=!0,this.meteorGenerationTime*=.8):this.lastMeteorVelocityYAccelerated=!1,this.meteors.getChildren().forEach((e=>{e.body.touching.down&&e.active&&(e.destroy(),this.score+=1)}))}generateMeteor(){if(!this.gameOver){var e=Phaser.Math.Between(0,800),t=this.meteors.create(e,0,"meteor").setScale(.04);t.setVelocityY(this.lastMeteorVelocityY),t.setCollideWorldBounds(!0),t.setBounce(1),t.setGravityY(0),this.lastMeteorVelocityYAccelerated&&(t.velocityYBeforeAccelerate=this.lastMeteorVelocityY)}}hitMeteor(){1!=this.gameOver&&(this.physics.pause(),this.player.setTint(16711680),this.gameOver=!0,this.time.addEvent({delay:1e3,callback:this.showGameOver,callbackScope:this}))}showGameOver(){this.scoreText.setVisible(!1),this.scene.launch("GameOver",{score:this.score});const e=this.scene.get("GameOver");e.events.on("clickMenu",this.handleGoMenu,this),e.events.on("clickRetry",this.handleRetry,this)}closeGameOver(){this.scene.stop("GameOver")}handleGoMenu(){this.closeGameOver(),this.scene.start("MainMenu")}handleRetry(){this.closeGameOver(),this.scene.restart()}}class i extends Phaser.Scene{constructor(){super({key:"GameOver",active:!1})}init(e){this.score=e.score}create(){const e=r.width-100,t=r.width-2*e,s=r.height-140,i=r.height-2*s;this.background=this.add.graphics({x:e,y:s}),this.background.fillStyle("0xFFF092",1),this.background.fillRoundedRect(0,0,t,i,0),this.title=this.add.text(200,s+.9*i,"GAME OVER",{fontSize:"75px",fill:"#000"}),this.text_score=this.add.text(e+.7*t,s+.6*i,"Score : "+this.score,{fontSize:"40px",fill:"#000"}),this.createGameOverButtons(e,s,t,i)}createGameOverButtons(e,t,s,i){this.btn_menu=this.createButton(e+.75*s,t+.23*i,this.clickMenu),this.label_menu=this.add.text(this.btn_menu.getData("centerX")-50,this.btn_menu.getData("centerY")-20,"Menu",{fontSize:"40px",fill:"#FFF"}),this.btn_retry=this.createButton(e+.25*s,t+.23*i,this.clickRetry),this.label_retry=this.add.text(this.btn_retry.getData("centerX")-57,this.btn_retry.getData("centerY")-20,"Retry",{fontSize:"40px",fill:"#FFF"})}createButton(e,t,s){const i=225,r=100,a=e-112.5,o=t-50,h=this.add.graphics({x:a,y:o});h.fillStyle("0x387155",1),h.fillRoundedRect(0,0,i,r,10),h.setDataEnabled(),h.setData("centerX",e),h.setData("centerY",t);const c=new Phaser.Geom.Rectangle(0,0,i,r);return h.setInteractive(c,Phaser.Geom.Rectangle.Contains),h.myDownCallback=()=>{h.clear(),h.fillStyle("0x60BFB8",1),h.fillRoundedRect(0,0,i,r,10)},h.myOutCallback=()=>{h.clear(),h.fillStyle("0x387155",1),h.fillRoundedRect(0,0,i,r,10)},h.on("pointerup",s,this),h.on("pointerdown",h.myDownCallback,this),h.on("pointerout",h.myOutCallback,this),h}clickMenu(){this.events.emit("clickMenu")}clickRetry(){this.events.emit("clickRetry")}}const r={type:Phaser.AUTO,width:800,height:600,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[t,s,i]};new Phaser.Game(r)})();